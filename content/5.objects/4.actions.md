---
title: "Объекты в действии"
---

## Объекты в действии

Рассмотрим пример, в котором используется объект. Напишем функцию, которая принимает на вход путь до файла и возвращает информацию об этом файле в виде объекта.

```
const filepath = '/path/to/index.js';
const fileinfo = getFileInfo(filepath);
// {
//     extension: js
//     filename: index.js
// };
```

В Node.js встроен модуль path, который может быстро извлечь нужные данные. Именно им и нужно пользоваться при написании реального кода, здесь же мы фокусируемся не на способе получения данных, а на формировании объекта.

Для начала нам нужно извлечь имя файла. Это можно сделать, используя метод split().

```
import _ from 'lodash';

// Разделяем путь на промежуточные директории и файл
const parts = filepath.split('/');
// Извлекаем имя файла
// last извлекает последний элемент из массива
const filename = _.last(parts);
```

Затем, точно таким же способом, можно получить и расширение:

```
const extension = _.last(filename.split('.'));
```

Теперь, объединяя все вместе, реализуем нужную функцию:

```
const getFileInfo = (filepath) => {
  const parts = filepath.split('/');
  const filename = _.last(parts);
  const extension = _.last(filename.split('.'));

  // В значения вместо переменных подставятся нужные значения
  const info = { filename: filename, extension: extension };

  return info;
}
```

В примере выше объект создается сразу, когда все данные уже готовы. Иногда делают по-другому, инициализируют объект в самом начале и постепенно наполняют его данными:

```
const getFileInfo = (filepath) => {
  // Инициализация объекта
  const info = {};

  const parts = filepath.split('/');
  const filename = _.last(parts);
  info.filename = filename;

  const extension = _.last(filename.split('.'));
  info.extension = extension;

  return info;
}
```

Какой способ предпочесть? В подавляющем большинстве ситуаций первый способ лучше. Когда объект создается сразу со всеми данными, то его структура очевидна с первого взгляда. Во втором примере придется пробежаться глазами по всему коду чтобы понять что же получится в итоге. С другой стороны, второй способ нужен в ситуациях, когда объект заполняется по условиям, которые могут не выполняться:

```
// Добавляем свойство в объект только если расширение существует
if (extension) {
  info.extension = extension;
}
```

Такое встречается значительно реже, но все же бывает.


## Упрощенный синтаксис создания объектов

Когда объект создается сразу наполненным данными, то он часто выглядит так, как в примерах выше:

```
const info = { filename: filename, extension: extension };
```

Обратите внимание на совпадение имени свойства и имени константы, которая содержит значение для данного свойства. Это настолько распространенный способ создания объектов, что в JavaScript добавили специальный, упрощенный синтаксис создания объектов. Если имя константы соответствует имени свойства в объекте, то можно просто добавить имя константы в определение объекта без указания имени свойства:


```
const info = { filename, extension };
```

Как показывает жизнь, этот подход оказался очень удобным и практичным. К тому же он сочетается с обычным способом создать объект. JavaScript позволяет миксовать разные способы определения в рамках одного объекта:

```
const filename = 'hexlet';
const ext = 'jpg';

const info = { filename, extension: ext };
// Порядок не важен, можно было и так
const info = { extension: ext, filename };

// В результате получится
// const info = { filename: 'hexlet', extension: 'jpg' };
```